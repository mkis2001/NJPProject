import{A as I,B as w,F as E,G as D,H as _,I as N,O as T,S as y,d as p,f as S,g as c,j as C,k as a,ka as k,l as d,la as z,m as x,ma as A,n as M,o as s,p as o,q as v,qa as B,ra as F,s as P,t as j,u as O,v as m,w as l,x as u,z as h}from"./chunk-JS5DXITH.js";var f=class{constructor(){this.id=Math.random()*9e3+1e3,this.itemId=0,this.typeId=0,this.price=0,this.units=0}};var b=class{constructor(){this.id=0,this.name="",this.author="",this.genre="",this.dateOfRelease=new Date,this.basePrice=0,this.image=""}};var g=class{constructor(){this.id=0,this.itemId=0,this.userId=0,this.timestamp=""}};function q(n,t){if(n&1&&(s(0,"p")(1,"b"),m(2,"Units left: "),o(),m(3),o()),n&2){let J=j();a(3),l(J.item.units)}}var G=(()=>{let t=class t{constructor(r,i,e){this.route=r,this.itemService=i,this.albumService=e,this.item=new f,this.album=new b,this.id=0,this.itemSubject=null,this.albumSubject=null,this.subscription=null}ngOnInit(){this.id=this.route.snapshot.params.id,this.itemSubject=this.itemService.getItems(),this.subscription=this.itemSubject.subscribe(r=>{this.item=r.find(i=>i.id==this.id)}),this.albumSubject=this.albumService.getAlbums(),this.subscription=this.albumSubject.subscribe(r=>{this.album=r.find(i=>i.id==this.item?.itemId)})}buy(){let r=JSON.stringify(new Date);r=r.replace("T"," "),r=r.slice(1,-6);let i=new g;if(i.itemId=this.item?.id,i.timestamp=r,i.userId=parseInt(localStorage.getItem("userId")),this.itemService.addTransaction(i),this.item.typeId!=1){let e=this.item;e.units=e.units-1,this.itemService.updateItem(e)}}};t.\u0275fac=function(i){return new(i||t)(d(T),d(k),d(z))},t.\u0275cmp=S({type:t,selectors:[["app-items-details"]],decls:26,vars:15,consts:[[1,"details"],["alt","",3,"src"],["id","name"],["id","author"],["id","genre"],[4,"ngIf"],["id","buy",1,"transition",3,"click"]],template:function(i,e){i&1&&(s(0,"section")(1,"div",0),v(2,"img",1),s(3,"div")(4,"p",2),m(5),o(),s(6,"p",3),m(7),o(),v(8,"hr"),s(9,"div",4)(10,"p"),m(11),h(12,"typePipe"),o(),s(13,"p")(14,"b"),m(15,"Genre:"),o(),m(16),o(),s(17,"p")(18,"b"),m(19,"Date of release:"),o(),m(20),h(21,"date"),o(),x(22,q,4,1,"p",5),o(),s(23,"button",6),P("click",function(){return e.buy()}),m(24),h(25,"currency"),o()()()()),i&2&&(a(2),O("src",e.album==null?null:e.album.image,C),a(3),l(e.album==null?null:e.album.name),a(2),l(e.album==null?null:e.album.author),a(4),l(I(12,8,e.item.typeId)),a(5),u(" ",e.album==null?null:e.album.genre,""),a(4),u(" ",I(21,10,e.album==null?null:e.album.dateOfRelease),""),a(2),M("ngIf",e.item.typeId!=1),a(2),u("Buy ",w(25,12,e.item.price,"\u20AC"),""))},dependencies:[E,_,D,A],styles:[".details[_ngcontent-%COMP%]{grid-column-start:2;position:relative;display:grid;grid-template-columns:1fr 2fr;line-height:1.5em;gap:var(--gridGap)}b[_ngcontent-%COMP%]{font-size:1em}img[_ngcontent-%COMP%]{width:100%;border-radius:1em}#name[_ngcontent-%COMP%]{font-size:1.8em;color:var(--primary);line-height:1.2em;text-transform:uppercase;margin-bottom:.4em}#author[_ngcontent-%COMP%]{font-size:1.8em;margin-bottom:.4em;font-style:italic}#genre[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.5em;letter-spacing:1px}#buy[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;background-color:var(--primary);border-radius:1em;color:var(--white);border:2px solid var(--primary);padding:1em}#buy[_ngcontent-%COMP%]:hover{background-color:transparent;color:var(--primary);cursor:pointer}"]});let n=t;return n})();var H=[{path:"",component:B},{path:":id",component:G}],U=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c({type:t}),t.\u0275inj=p({imports:[y.forChild(H),y]});let n=t;return n})();var ut=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c({type:t}),t.\u0275inj=p({imports:[N,U,F]});let n=t;return n})();export{ut as ItemsModule};
